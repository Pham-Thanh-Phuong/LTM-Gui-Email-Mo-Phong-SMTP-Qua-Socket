<h2 align="center">
    <a href="https://dainam.edu.vn/vi/khoa-cong-nghe-thong-tin">
    üéì Faculty of Information Technology (DaiNam University)
    </a>
</h2>
<h2 align="center">
   G·ª¨I EMAIL M√î PH·ªéNG SMTP QUA SOCKET
</h2>
<div align="center">
    <p align="center">
        <img src="docs/aiotlab_logo.png" alt="AIoTLab Logo" width="170"/>
        <img src="docs/fitdnu_logo.png" alt="AIoTLab Logo" width="180"/>
        <img src="docs/dnu_logo.png" alt="DaiNam University Logo" width="200"/>
    </p>

[![AIoTLab](https://img.shields.io/badge/AIoTLab-green?style=for-the-badge)](https://www.facebook.com/DNUAIoTLab)
[![Faculty of Information Technology](https://img.shields.io/badge/Faculty%20of%20Information%20Technology-blue?style=for-the-badge)](https://dainam.edu.vn/vi/khoa-cong-nghe-thong-tin)
[![DaiNam University](https://img.shields.io/badge/DaiNam%20University-orange?style=for-the-badge)](https://dainam.edu.vn)

</div>


## üìñ 1. Gi·ªõi thi·ªáu
ƒê·ªÅ t√†i x√¢y d·ª±ng m·ªôt **·ª©ng d·ª•ng g·ª≠i v√† nh·∫≠n email m√¥ ph·ªèng giao th·ª©c SMTP** th√¥ng qua **TCP Socket**.  
H·ªá th·ªëng ƒë∆∞·ª£c ph√°t tri·ªÉn b·∫±ng **Java (Swing)** v√† s·ª≠ d·ª•ng **SQLite** ƒë·ªÉ qu·∫£n l√Ω d·ªØ li·ªáu ng∆∞·ªùi d√πng c≈©ng nh∆∞ email.  

·ª®ng d·ª•ng bao g·ªìm c√°c ch·ª©c nƒÉng ch√≠nh:

- üîë **ƒêƒÉng k√Ω / ƒêƒÉng nh·∫≠p**: Ng∆∞·ªùi d√πng c√≥ th·ªÉ t·∫°o t√†i kho·∫£n v√† ƒëƒÉng nh·∫≠p h·ªá th·ªëng.  
- ‚úâÔ∏è **G·ª≠i th∆∞**: G·ª≠i email ƒë·∫øn ng∆∞·ªùi d√πng kh√°c th√¥ng qua c∆° ch·∫ø Socket m√¥ ph·ªèng SMTP.  
- üì• **H·ªôp th∆∞ ƒë·∫øn (Inbox)**: Hi·ªÉn th·ªã danh s√°ch email ƒë√£ nh·∫≠n.  
- üìë **Th∆∞ ƒë√£ g·ª≠i (Sent)**: Hi·ªÉn th·ªã c√°c email m√† ng∆∞·ªùi d√πng ƒë√£ g·ª≠i ƒëi.  
- üíæ **L∆∞u tr·ªØ email**: M·ªçi email s·∫Ω ƒë∆∞·ª£c l∆∞u trong **SQLite Database** v√† tr√™n Server d∆∞·ªõi d·∫°ng file `.txt`.  

·ª®ng d·ª•ng gi√∫p hi·ªÉu r√µ h∆°n v·ªÅ:
- C√°ch th·ª©c **Client ‚Üî Server** giao ti·∫øp qua **TCP Socket**.  
- Nguy√™n l√Ω ho·∫°t ƒë·ªông c∆° b·∫£n c·ªßa **SMTP (Simple Mail Transfer Protocol)**.  

## üìå 2. C√¥ng ngh·ªá s·ª≠ d·ª•ng

- Trong qu√° tr√¨nh x√¢y d·ª±ng h·ªá th·ªëng m√¥ ph·ªèng g·ª≠i email qua giao th·ª©c SMTP b·∫±ng Socket, nh√≥m s·ª≠ d·ª•ng c√°c c√¥ng ngh·ªá ch√≠nh sau:

‚∏ª

### 2.1. Ng√¥n ng·ªØ l·∫≠p tr√¨nh Java <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java Logo" width="50" height="50" />

### 2.2. Socket trong Java

Socket l√† ƒëi·ªÉm cu·ªëi (endpoint) trong qu√° tr√¨nh giao ti·∫øp gi·ªØa hai ti·∫øn tr√¨nh qua m·∫°ng. Trong Java, g√≥i java.net cung c·∫•p c√°c l·ªõp quan tr·ªçng:

Trong h·ªá th·ªëng n√†y:

     ‚Ä¢ Server m·ªü c·ªïng 2525, ch·ªù client k·∫øt n·ªëi.
     
     ‚Ä¢ Client k·∫øt n·ªëi qua Socket v√† g·ª≠i c√°c l·ªánh theo chu·∫©n SMTP (HELO, MAIL FROM, RCPT TO, DATA‚Ä¶).
     
     ‚Ä¢ Server ph·∫£n h·ªìi b·∫±ng c√°c m√£ tr·∫°ng th√°i (220, 250, 354, 221‚Ä¶) nh∆∞ m·ªôt m√°y ch·ªß SMTP th·ª±c t·∫ø.

### 2.3. M√¥ h√¨nh Client ‚Äì Server

M√¥ h√¨nh Client ‚Äì Server l√† ki·∫øn tr√∫c ph·ªï bi·∫øn trong l·∫≠p tr√¨nh m·∫°ng.

     ‚Ä¢ Client: G·ª≠i y√™u c·∫ßu (request).
     
     ‚Ä¢ Server: X·ª≠ l√Ω y√™u c·∫ßu v√† tr·∫£ v·ªÅ ph·∫£n h·ªìi (response).

Trong b√†i to√°n n√†y:

     ‚Ä¢ Client ƒë√≥ng vai tr√≤ ph·∫ßn m·ªÅm g·ª≠i email.
     
     ‚Ä¢ Server ƒë√≥ng vai tr√≤ m√°y ch·ªß SMTP gi·∫£ l·∫≠p.
     
     ‚Ä¢ Sau khi nh·∫≠n ƒë·ªß d·ªØ li·ªáu, server s·∫Ω l∆∞u email th√†nh file ƒë·ªÉ thay cho vi·ªác g·ª≠i ra Internet.

Vi·ªác s·ª≠ d·ª•ng m√¥ h√¨nh Client ‚Äì Server gi√∫p h·ªá th·ªëng d·ªÖ d√†ng m√¥ ph·ªèng c√°ch m√† c√°c ph·∫ßn m·ªÅm email (Outlook, Gmail, Thunderbird‚Ä¶) giao ti·∫øp v·ªõi m√°y ch·ªß SMTP th·∫≠t ngo√†i Internet.

‚∏ª

 ## üíª 3. C√°c h√¨nh ·∫£nh ch·ª©c nƒÉng

Trong ph·∫ßn n√†y, h·ªá th·ªëng ƒë∆∞·ª£c minh h·ªça b·∫±ng c√°c h√¨nh ·∫£nh ch·ª•p t·ª´ qu√° tr√¨nh ch·∫°y ch∆∞∆°ng tr√¨nh. C√°c h√¨nh n√†y gi√∫p l√†m r√µ c√°ch th·ª©c giao ti·∫øp gi·ªØa SMTP Client v√† SMTP Server, c≈©ng nh∆∞ k·∫øt qu·∫£ l∆∞u tr·ªØ email tr√™n server.

‚∏ª

### 3.1. Giao ti·∫øp Client ‚Üî Server (Console log)
- Khi client b·∫•m **G·ª≠i**, ch∆∞∆°ng tr√¨nh client (GUI) s·∫Ω m·ªü socket t·ªõi `localhost:2525` v√† g·ª≠i c√°c l·ªánh SMTP d·∫°ng vƒÉn b·∫£n. Server ph·∫£n h·ªìi b·∫±ng c√°c m√£ tr·∫°ng th√°i SMTP (220/250/354/221...).

**Lu·ªìng m·∫´u (Client ‚Üí Server)**:
```
S  220 SMTP Server Ready
C  HELO localhost
S  250 Hello
C  MAIL FROM:<alice>
S  250 OK
C  RCPT TO:<bob>
S  250 OK
C  SUBJECT: Test subject
S  250 OK
C  DATA
S  354 End data with <CR><LF>.<CR><LF>
C  [n·ªôi dung th∆∞ d√≤ng 1]
C  [n·ªôi dung th∆∞ d√≤ng 2]
C  .
S  250 Message accepted
C  QUIT
S  221 Bye
```

- **Console ph√≠a Client**: in c√°c l·ªánh ƒë√£ g·ª≠i v√† ph·∫£n h·ªìi nh·∫≠n ƒë∆∞·ª£c.  
- **Console ph√≠a Server**: in c√°c l·ªánh nh·∫≠n ƒë∆∞·ª£c t·ª´ client v√† khi l∆∞u email th√†nh c√¥ng s·∫Ω in log (v√≠ d·ª• ‚ÄúMessage accepted‚Äù ho·∫∑c th√¥ng b√°o SQL th√†nh c√¥ng).

### 3.2. Email ƒë∆∞·ª£c l∆∞u trong Database (`email_app.db`)
- M√£ ngu·ªìn hi·ªán t·∫°i **l∆∞u email tr·ª±c ti·∫øp v√†o b·∫£ng `emails`** c·ªßa SQLite (kh√¥ng l∆∞u file `.txt` trong th∆∞ m·ª•c mailbox). B·∫£ng `emails` c√≥ c·∫•u tr√∫c ch√≠nh nh∆∞ sau (ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông khi ·ª©ng d·ª•ng kh·ªüi ƒë·ªông):

```sql
CREATE TABLE IF NOT EXISTS users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT UNIQUE,
  password TEXT
);

CREATE TABLE IF NOT EXISTS emails (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  sender TEXT,
  receiver TEXT,
  subject TEXT,
  content TEXT,
  time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```
<p align="center"> <img width="863" height="465" alt="image" src="https://github.com/user-attachments/assets/e788e15a-f70d-4535-ae2e-338e7b8081fd" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 1</i></p>

### 3.3. Giao di·ªán & c√°c ch·ª©c nƒÉng li√™n quan
- C·∫•u tr√∫c th∆∞ m·ª•c:
  
<p align="center"> <img width="239" height="310" alt="image" src="https://github.com/user-attachments/assets/0b68a056-e014-4e1d-8843-d48a6041d4dd" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 2</i></p>
- Giao di·ªán ƒëƒÉng k√Ω:

<p align="center"> <img width="387" height="244" alt="image" src="https://github.com/user-attachments/assets/e302f46f-fe40-45dc-8dcd-f6c50a1161e5" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 3</i></p>
- Giao di·ªán ƒëƒÉng nh·∫≠p:

<p align="center"> <img width="385" height="292" alt="image" src="https://github.com/user-attachments/assets/ec6b96fa-b02c-4f13-bd59-e8a4b0eb6f31" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 4</i></p>
- Giao di·ªán g·ª≠i th∆∞:

<p align="center"> <img width="791" height="596" alt="image" src="https://github.com/user-attachments/assets/9af6b2f2-463f-417b-aa06-4b6a5ac76b9c" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 5</i></p>
- Giao di·ªán h·ªôp th∆∞ ƒë·∫øn:

<p align="center"> <img width="786" height="590" alt="image" src="https://github.com/user-attachments/assets/a984cc6f-2a6d-45a3-a60e-cc461b9a10af" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 6</i></p>
- Giao di·ªán th∆∞ ƒë√£ g·ª≠i:

<p align="center"> <img width="783" height="590" alt="image" src="https://github.com/user-attachments/assets/84b5f484-eb96-4a90-bcac-4bd05ec9fafd" /> </p>
<p align="center"><i>H√¨nh ·∫£nh 7</i></p>

## ‚öôÔ∏è 4. C√°c b∆∞·ªõc c√†i ƒë·∫∑t

    Ph·∫ßn n√†y m√¥ t·∫£ c√°c b∆∞·ªõc chu·∫©n b·ªã, c√†i ƒë·∫∑t m√¥i tr∆∞·ªùng v√† ch·∫°y th·ª≠ h·ªá th·ªëng SMTP m√¥ ph·ªèng b·∫±ng Java. 

‚∏ª

### 4.1. Chu·∫©n b·ªã
1. **C√†i JDK** (JDK 8+) v√† ki·ªÉm tra:
   ```bash
   java -version
   ```

2. **IDE**: Eclipse.

3. **Th√™m th∆∞ vi·ªán SQLite JDBC** :  
   - N·∫øu project ch∆∞a c√≥ `sqlite-jdbc` tr√™n classpath, t·∫£i `sqlite-jdbc-*.jar`  v√† add v√†o Build Path trong Eclipse.  
   - (Trong tr∆∞·ªùng h·ª£p ƒë√£ g·ª≠i s·∫µn `.class` th√¨ ch·∫°y tr·ª±c ti·∫øp c≈©ng OK n·∫øu runtime c√≥ JDBC driver; nh∆∞ng t·ªët nh·∫•t ƒë·ªÉ c√≥ th·ªÉ m·ªü DB t·ª´ m√£ ngu·ªìn, th√™m jar n√†y).

4. **Ki·ªÉm tra c·∫•u tr√∫c file**: trong th∆∞ m·ª•c project c·∫ßn c√≥:
```
/src/ (source files ho·∫∑c package .class)
App.class, LoginForm.class, RegisterForm.class, MainForm.class, Database.class, SMTPServer.class, SMTPClient.class, ...
email_app.db    <-- s·∫Ω ƒë∆∞·ª£c t·∫°o khi ch·∫°y l·∫ßn ƒë·∫ßu (n·∫øu ch∆∞a c√≥)
```

### 4.2. Kh·ªüi ƒë·ªông h·ªá th·ªëng (th·ª© t·ª± ch·∫°y)

#### 4.2.1. Ch·∫°y SMTP Server
1. M·ªü class `SMTPServer` (package `BaiTapLon123`).  
2. Run ‚Üí **Run As ‚Üí Java Application**.  
3. Console s·∫Ω in (v√≠ d·ª•):
```
SMTP Server ƒëang ch·∫°y tr√™n c·ªïng 2525
```
> L∆∞u √Ω: Server ph·∫£i ch·∫°y tr∆∞·ªõc khi client c·ªë g·∫Øng k·∫øt n·ªëi, n·∫øu kh√¥ng client s·∫Ω g·∫∑p `Connection refused`.

#### 4.2.2. Ch·∫°y Client (GUI)
1. M·ªü `App` (ho·∫∑c `LoginForm` n·∫øu ch·∫°y tr·ª±c ti·∫øp).  
2. Run ‚Üí **Run As ‚Üí Java Application**.  
3. Tr√™n giao di·ªán: ƒêƒÉng k√Ω t√†i kho·∫£n (Register) ‚Üí ƒêƒÉng nh·∫≠p (Login) ‚Üí v√†o tab So·∫°n th∆∞.  
4. Nh·∫≠p **Ng∆∞·ªùi nh·∫≠n**, **Ch·ªß ƒë·ªÅ**, **N·ªôi dung** ‚Üí b·∫•m **G·ª≠i**. Client s·∫Ω:
   - G·ªçi SQL `INSERT INTO emails(...)` ƒë·ªÉ l∆∞u email (client-side l∆∞u tr∆∞·ªõc).  
   - M·ªü socket t·ªõi server `localhost:2525`, g·ª≠i l·ªánh SMTP (HELO, MAIL FROM, RCPT TO, SUBJECT, DATA, content, `.`), nh·∫≠n ph·∫£n h·ªìi, r·ªìi ƒë√≥ng k·∫øt n·ªëi.

#### 4.2.3. Ki·ªÉm tra k·∫øt qu·∫£
- M·ªü `email_app.db` b·∫±ng **DB Browser for SQLite** (ho·∫∑c ch·∫°y `ViewDB` test class) ƒë·ªÉ xem c√°c b·∫£n ghi trong b·∫£ng `emails`.  
- B·∫°n c√≥ th·ªÉ th·∫•y c√°c tr∆∞·ªùng: `sender`, `receiver`, `subject`, `content`, `time`.
- Console server s·∫Ω in log c√°c l·ªánh client g·ª≠i v√† th√¥ng b√°o khi email ƒë∆∞·ª£c insert th√†nh c√¥ng.

### 4.3. C√°c l·ªói th∆∞·ªùng g·∫∑p & c√°ch x·ª≠ l√Ω nhanh
- **Connection refused**: Server ch∆∞a ch·∫°y ‚Üí ch·∫°y `SMTPServer` tr∆∞·ªõc.  
- **No such table: emails**: Database ch∆∞a ƒë∆∞·ª£c t·∫°o ho·∫∑c class `Database` kh√¥ng ƒë∆∞·ª£c g·ªçi tr∆∞·ªõc khi insert ‚Üí ch·∫°y App (Database static initializer s·∫Ω t·∫°o b·∫£ng). C√≥ th·ªÉ x√≥a file `email_app.db` v√† kh·ªüi ƒë·ªông l·∫°i ƒë·ªÉ t·∫°o l·∫°i b·∫£ng m·ªõi.  
- **T√†i kho·∫£n r·ªóng / ƒëƒÉng k√Ω l·ªói**: ƒê·∫£m b·∫£o `RegisterForm` kh√¥ng cho ph√©p username ho·∫∑c password r·ªóng; ki·ªÉm tra b·∫£ng `users` c√≥ b·∫£n ghi r·ªóng kh√¥ng. 
- **Kh√¥ng th·∫•y email trong Inbox**: Ki·ªÉm tra xem g·ª≠i t·ªõi ƒë√∫ng `receiver` (tr√πng ch√≠nh x√°c username trong b·∫£ng `users`).

---

## üìû 5. Li√™n h·ªá
- üíå Email: thankfwong23@gmail.com  
- ‚òéÔ∏è SƒêT: 0383 609 685 


¬© 2025 AIoTLab, Faculty of Information Technology, DaiNam University. All rights reserved.

---
